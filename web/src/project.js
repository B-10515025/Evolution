window.__require=function e(t,a,n){function i(o,r){if(!a[o]){if(!t[o]){var l=o.split("/");if(l=l[l.length-1],!t[l]){var f="function"==typeof __require&&__require;if(!r&&f)return f(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+o+"'")}}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){return i(t[o][1][e]||e)},c,c.exports,e,t,a,n)}return a[o].exports}for(var s="function"==typeof __require&&__require,o=0;o<n.length;o++)i(n[o]);return i}({Client:[function(e,t,a){"use strict";cc._RF.push(t,"aa5d2EkBYpP0IoyFZVmP9yi","Client");var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,a,n,i){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&s.status>=200&&s.status<400?null!==i&&i(s.responseText):4==s.readyState&&n()},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Authorization","Bearer 6d34550e-9eed-11ea-ab3c-04d9f5bb8225"),s.onerror=function(){n()},t?s.send(JSON.stringify(t)):a?s.send(a):s.send()}var o=new(function(){function e(){i(this,e),this.url="http://slottest.a15t.cc:88/api/v1/sim",this.loacl_url="http://127.0.0.1:8080/",this.params={GameID:"panthermoon",Line:15,BetPerLine:1,RTP:95,Times:1e6,Configs:{Base:{Odds:{0:1e3,1:1e3,2:1e3,3:1e3,5:1e3,10:1e3,20:1e3,25:1e3,50:1e3,100:1e3,150:1e3,200:1e3,250:1e3,300:1e3,500:1e3,"-1":1e3}},Free:{Odds:{0:1e3,1:1e3,2:1e3,3:1e3,5:1e3,10:1e3,20:1e3,25:1e3,50:1e3,100:1e3,150:1e3,200:1e3,250:1e3,"-1":1e3}}}}}return n(e,[{key:"Init",value:function(e,t){s("http://slottest.a15t.cc:88/api/v1/gpi/anaysis/kiss",{GameID:"panthermoon",Line:15,BetPerLine:1,Times:1e6},void 0,function(){t()},function(t){window.TARGET=JSON.parse(t),console.log(TARGET),e()})}},{key:"simulation",value:function(e,t){for(var a=[],n=0;n<DNA_SIZE;n+=10){for(var i=0,o=0;o<10;o++)i=2*i+Number(e[n+o]);a.push(i)}this.params.Times=1e6,this.params.Configs.Base.Odds[0]=a[0],this.params.Configs.Base.Odds[1]=a[1],this.params.Configs.Base.Odds[2]=a[2],this.params.Configs.Base.Odds[3]=a[3],this.params.Configs.Base.Odds[5]=a[4],this.params.Configs.Base.Odds[10]=a[5],this.params.Configs.Base.Odds[20]=a[6],this.params.Configs.Base.Odds[25]=a[7],this.params.Configs.Base.Odds[50]=a[8],this.params.Configs.Base.Odds[100]=a[9],this.params.Configs.Base.Odds[150]=a[10],this.params.Configs.Base.Odds[200]=a[11],this.params.Configs.Base.Odds[250]=a[12],this.params.Configs.Base.Odds[300]=a[13],this.params.Configs.Base.Odds[500]=a[14],this.params.Configs.Base.Odds[-1]=a[15],this.params.Configs.Free.Odds[0]=a[16],this.params.Configs.Free.Odds[1]=a[17],this.params.Configs.Free.Odds[2]=a[18],this.params.Configs.Free.Odds[3]=a[19],this.params.Configs.Free.Odds[5]=a[20],this.params.Configs.Free.Odds[10]=a[21],this.params.Configs.Free.Odds[20]=a[22],this.params.Configs.Free.Odds[25]=a[23],this.params.Configs.Free.Odds[50]=a[24],this.params.Configs.Free.Odds[100]=a[25],this.params.Configs.Free.Odds[150]=a[26],this.params.Configs.Free.Odds[200]=a[27],this.params.Configs.Free.Odds[250]=a[28],this.params.Configs.Base.Odds[300]=a[29],this.params.Configs.Base.Odds[500]=a[30],this.params.Configs.Free.Odds[-1]=a[31],s(this.url,this.params,void 0,function(){},function(e){t(JSON.parse(e))})}},{key:"local_simulation",value:function(e,t){for(var a="1000000;",n=0;n<DNA_SIZE;n+=10){for(var i=0,o=0;o<10;o++)i=2*i+Number(e[n+o]);a=a+i.toString()+(n%(DNA_SIZE/2)==DNA_SIZE/2-10?";":",")}s(this.loacl_url+"sim",void 0,a,function(){},function(e){t(JSON.parse(e))})}},{key:"save",value:function(e){console.log("Save Challenger DNA File."),s(this.loacl_url+"save",void 0,e,function(){},function(){})}}]),e}());window.client=o,cc._RF.pop()},{}],Evolution:[function(e,t,a){"use strict";cc._RF.push(t,"e1d88cRR0BDqad5QTLfiY58","Evolution");var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.DNA_SIZE=320,window.CROSS_RATE=.3,window.MUTATION_RATE=.005,window.BIT_RATE=.3,window.POPULATION=100,window.FITING=-1,window.LOCAL_FITING=-1,window.AGE=0,window.EXAMPLE="111010010001111101001000111101011100000001100101000101110101010101000000100010000010110010001110101101100011011111101000000001101000110001000000011001011011000000101011001111101000011010000001100111110010101000001000001100010100010001111101001000000000111001100110011111001010011000001000000111110100",window.CODES=["100110111010001010001010010110111101100110000100100110010000101100000000010101000101100001101000000101100111011010010111111100011000110011011111111100010011110110110100100101001110000111001010010011101111010101100101000111010011111000111011111000110010000001101011001000110010100011010000101100001101","101110111000100011011100010001111110001010110011000110011010011111001010110111001101100010101111001001000010101010001010101100011001101011101111101111010111110101001101000001111011000001011000000000111111111010011110100110010110110111111000011001001100100011110010010100100110000010001000000001100010","101111100011101001001100010100000010100110001010000010001010110110001000010111011101110010101010111111110110101010000011111110011001110001100001111001010111100101110111000101101010010101111100010011011101100000010100100011111010111011010001111000110010100000100011010111011010100011110000000010011010","101111110100100001001110000001111010001111101010000110011110010011001110010011001101010110111111101001000000000111000011101010011101111101100110101101010011101101111101000101000010010000111000100000111110111000010010001001110110110111110000011011010100111011110010110011100111000111100001001101001011","101110101010101011001111010101100001001010010000101010110010100010100000010000001101100100011100001011100000011001011011111100010101110110000001100100010011110110001001110000001100011111000001010101111111100100001111100111010010011100000010111001010110000101110011100100101010111110010110110010111111","101000000010110001101101000001100010000110011011110001001010110010100000111110100101010010101111110001000110000110010010111010101001010000110110010011010101000101100101111001010011010001110011000011000011101000110000100010000110010100111000010001110000000010111110001100001100000010101000110111110111","100100111011011000011101001101011010100010111000100100011011010011100000111111001101100001011110001111000111000000011101111101010001111110101101111011010011111001110100111101011000010011111100000001110110111101100000100101110000110000100000111001110000111000100001011101001111111010101000101100011000","100111001011101001001100010010000010101110011010000110001111010110001000010111011001110010101011111101111110001010000011111110001001110001100001111001010011100101110111110101101010010111111100010010001101101000010100100011111010111001100001111000110010100000100011011111011010100010100000000010010010","100111011011000000001110100110011110100010110100000100000111010011110001011011001011010101011100011001010110000010101011111001011101100101001111100001010101100001110101100101000111000001111000100000100110001100100011110101010010110000111000011000110010110000100001011000101111001010001010110100111100","101111111011011000101010001011111100100011110100101100001110010001111001000110001011110110101111111101010110001010000001101001011111110011101000001101010111110001111001011111000111110111111001100000100111001000110011110011111111110110101000100001110010111000101011101011110000100010111101100010011110","100111111011001000001010000110111011000011110100100100001111010000100001011011001011010101001100011101010000000010011011111011011111111110001100101011010111100001111101101101000110100001111010100000100100011100100001100111110010110001110000011000110001110000101011111000110001101010100000101010011101"];var s=function(){function e(t,a){i(this,e),this.code="",this.info=null,this.configs=[],this.fitness=0,this.weight=[15,15,15,5,3,3,3,2,2,1,1,1,1,1,1,1,1,1,5,3,3,3,2,2,1,1,1,1,1,1,1,1,1],this.code="";var n=[];if(t)for(var s=t.code.split(""),o=a.code.split(""),r=0;r<DNA_SIZE;r++)n.push(Math.random()<CROSS_RATE?o[r]:s[r]);else for(var l=0;l<DNA_SIZE;l++)n.push(Math.floor(2*Math.random()).toString());for(var f=0;f<DNA_SIZE;f++)n[f]=Math.random()<MUTATION_RATE?1-n[f]:n[f],this.code+=n[f]}return n(e,[{key:"fit",value:function(){var e=this;client.simulation(this.code,function(t){try{e.info=t,e.info.LiveCycle=void 0,e.info.LongTerm=void 0,e.configs=[];for(var a=0;a<DNA_SIZE;a+=10){for(var n=0,i=0;i<10;i++)n=2*n+Number(e.code[a+i]);e.configs.push(n)}var s=0,o=0;s+=Math.abs(t.GameInfo.RTP-TARGET.GameInfo.RTP)/TARGET.GameInfo.RTP*e.weight[0],o+=e.weight[0],s+=Math.abs(t.BaseGame.RTP-TARGET.BaseGame.RTP)/TARGET.BaseGame.RTP*e.weight[1],o+=e.weight[1],void 0!=t.FreeGame&&(s+=Math.abs(t.FreeGame.RTP-TARGET.FreeGame.RTP)/TARGET.FreeGame.RTP*e.weight[2]),o+=e.weight[2];for(var r=0;r<15;r++)TARGET.BaseGame.Detail[r].HitProb>0&&(s+=Math.abs(t.BaseGame.Detail[r].HitProb-TARGET.BaseGame.Detail[r].HitProb)/TARGET.BaseGame.Detail[r].HitProb*e.weight[3+r],o+=e.weight[3+r]);if(void 0!=t.FreeGame)for(var l=0;l<15;l++)TARGET.FreeGame.Detail[l].HitProb>0&&(s+=Math.abs(t.FreeGame.Detail[l].HitProb-TARGET.FreeGame.Detail[l].HitProb)/TARGET.FreeGame.Detail[l].HitProb*e.weight[18+l],o+=e.weight[18+l]);e.fitness=o/s}catch(a){console.log(a),console.log(t),console.log(FITING),e.fitness=0}console.log(FITING+" Challenger DNA Testing..."),FITING--})}},{key:"local_fit",value:function(){var e=this;client.local_simulation(this.code,function(t){try{e.info=t,e.configs=[];for(var a=0;a<DNA_SIZE;a+=10){for(var n=0,i=0;i<10;i++)n=2*n+Number(e.code[a+i]);e.configs.push(n)}var s=0,o=0;s+=Math.abs(t.RTP-TARGET.GameInfo.RTP)/TARGET.GameInfo.RTP*e.weight[0],o+=e.weight[0],s+=Math.abs(t.BasegameRTP-TARGET.BaseGame.RTP)/TARGET.BaseGame.RTP*e.weight[1],o+=e.weight[1],s+=Math.abs(t.FreegameRTP-TARGET.FreeGame.RTP)/TARGET.FreeGame.RTP*e.weight[2],o+=e.weight[2];for(var r=0;r<t.BasegameHitRate.length;r++)TARGET.BaseGame.Detail[r].HitProb>0&&(s+=Math.abs(t.BasegameHitRate[r]-TARGET.BaseGame.Detail[r].HitProb)/TARGET.BaseGame.Detail[r].HitProb*e.weight[3+r],o+=e.weight[3+r]);for(var l=0;l<t.FreegameHitRate.length;l++)TARGET.FreeGame.Detail[l].HitProb>0&&(s+=Math.abs(t.FreegameHitRate[l]-TARGET.FreeGame.Detail[l].HitProb)/TARGET.FreeGame.Detail[l].HitProb*e.weight[18+l],o+=e.weight[18+l]);e.fitness=o/s}catch(a){console.log(a),console.log(t),console.log(LOCAL_FITING),e.fitness=0}LOCAL_FITING--})}}]),e}();cc.Class({extends:cc.Component,properties:{dna:[s],challenger:[s],time:0,interval:0},start:function(){var e=this;LOCAL_FITING=0,FITING=-1,setInterval(function(){0==FITING&&(FITING=-1,e.challenger.sort(function(e,t){return t.fitness-e.fitness}),console.log("Challenger DNA Test result:"),console.log(e.challenger),client.save(JSON.stringify(e.challenger,void 0,2)))},1e3)},Evolution:function(){var e=this;LOCAL_FITING=-1,client.Init(function(){e.dna=[],LOCAL_FITING=0,FITING=-1,AGE=0,POPULATION=100;for(var t=0;t<POPULATION;t++)e.dna.push(new s),e.dna[t].local_fit(),LOCAL_FITING++;e.time=(new Date).getTime()},function(){console.log("client Init failed.")}),clearInterval(this.interval),this.interval=setInterval(function(){if(0==LOCAL_FITING){LOCAL_FITING=-1,AGE++,e.dna.sort(function(e,t){return t.fitness-e.fitness}),e.dna.splice(POPULATION),console.log("AGE: "+AGE),console.log("Cost time: "+((new Date).getTime()-e.time)/1e3+"sec"),console.log(e.dna),e.time=(new Date).getTime();for(var t=0,a=0;a<POPULATION;a++)t+=e.dna[a].fitness;LOCAL_FITING=POPULATION;for(var n=0;n<POPULATION;n++){if(Math.random()*POPULATION>n){for(var i=Math.floor(Math.random()*POPULATION);Math.random()*t>e.dna[i].fitness||n==i;)i=Math.floor(Math.random()*POPULATION);e.dna.push(new s(e.dna[n],e.dna[i])),console.log("CROSS: "+n+" & "+i)}else e.dna.push(new s);e.dna[e.dna.length-1].local_fit()}console.log("Generate random DNAs..."),console.log("ADD "+LOCAL_FITING+" DNAs")}},100)},OneBitSearch:function(){var e=this;LOCAL_FITING=-1,client.Init(function(){e.dna=[],LOCAL_FITING=0,FITING=-1,AGE=0,POPULATION=10;for(var t=0;t<POPULATION;t++)e.dna.push(new s),e.dna[t].local_fit(),LOCAL_FITING++;e.time=(new Date).getTime()},function(){console.log("client Init failed.")}),clearInterval(this.interval),this.interval=setInterval(function(){if(0==LOCAL_FITING){LOCAL_FITING=-1,AGE++,e.dna.sort(function(e,t){return t.fitness-e.fitness}),e.dna.splice(POPULATION),console.log("AGE: "+AGE),console.log("Cost time: "+((new Date).getTime()-e.time)/1e3+"sec"),console.log(e.dna),e.time=(new Date).getTime(),console.log("Generate OneBit difference DNAs..."),LOCAL_FITING=0;for(var t=0;t<POPULATION;t++)for(var a=0;a<DNA_SIZE;a++)if(Math.random()<BIT_RATE){var n=new s;n.code="";for(var i=0;i<DNA_SIZE;i++)n.code+=a==i?"0"==e.dna[t].code[i]?"1":"0":e.dna[t].code[i];e.dna.push(n),e.dna[e.dna.length-1].local_fit(),LOCAL_FITING++}console.log("ADD "+LOCAL_FITING+" DNAs")}},100)},Submit:function(){this.challenger=[],FITING=0;for(var e=0;e<10;e++)this.challenger.push(new s),this.challenger[e].code=this.dna[e].code,this.challenger[e].fit(),FITING++;console.log("Challenger DNA Test Start.")}}),cc._RF.pop()},{}]},{},["Client","Evolution"]);